
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="hyerin.io">
    <title>hyerin.io</title>
    <meta name="author" content="hyerinOh">
    
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"Website","@id":"http://yoursite.com","author":{"@type":"Person","name":"hyerinOh","sameAs":["https://github.com/hyerinOh"],"image":"https://www.gravatar.com/avatar/7eddae1bd56cccc919c3936745df92a7"},"name":"hyerin.io","description":null,"url":"http://yoursite.com"}</script>
    <meta property="og:type" content="blog">
<meta property="og:title" content="hyerin.io">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="hyerin.io">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="hyerin.io">
    
    
        
    
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/all.css">
    <link rel="stylesheet" href="/assets/css/jquery.fancybox.css">
    <link rel="stylesheet" href="/assets/css/thumbs.css">
    <link rel="stylesheet" href="/assets/css/tranquilpeak.css">
    <!--STYLES END-->
    

    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    

<header id="header" data-behavior="2">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/ "
            aria-label=""
        >
            hyerin.io
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
        </a>
    
</header>

            <!-- Define author's picture -->


<nav id="sidebar" data-behavior="2">
    <div class="sidebar-container">
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                            title="Home"
                        >
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                            title="Categories"
                        >
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                            title="Tags"
                        >
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                            title="About"
                        >
                    
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/hyerinOh" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="2"
                 class="
                        hasCoverMetaIn
                        ">
                <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2019/09/26/IIFE-modules-namespaces/"
                            aria-label=": 8. IIFE, modules, namespaces"
                        >
                            8. IIFE, modules, namespaces
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-09-26T16:05:07+09:00">
	
		    Sep 26, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Dev/">Dev</a>, <a class="category-link" href="/categories/Dev/JavaScript/">JavaScript</a>, <a class="category-link" href="/categories/Dev/JavaScript/33-js-concepts/">33-js-concepts</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <a id="more"></a>

<h2 id="IIFE-Immediately-Invoked-Function-Expression-즉시실행함수"><a href="#IIFE-Immediately-Invoked-Function-Expression-즉시실행함수" class="headerlink" title="IIFE(Immediately-Invoked Function Expression) 즉시실행함수"></a>IIFE(Immediately-Invoked Function Expression) 즉시실행함수</h2><ul>
<li><p>reference: <a href="https://developer.mozilla.org/ko/docs/Glossary/IIFE" target="_blank" rel="noopener">https://developer.mozilla.org/ko/docs/Glossary/IIFE</a></p>
</li>
<li><p>함수를 정의하자마자 즉시 실행하는 함수</p>
</li>
<li><p>Self-Executing Annoymous Function으로 알려진 디자인 패턴</p>
<ul>
<li>첫 번째 괄호(grouping Operator)로 둘러쌓인 익명함수 : 전역 스코프에 불필요한 변수를 추가해서 오염시키는 것을 방지할 수 있을 뿐 아니라 IIFE 내부의 변수에 접근하지 못하도록 막을 수 있는 방법</li>
<li>두 번째 괄호 : 즉시 실행 함수를 생성하는 괄호. 이를 통해 자바스크립트 엔진은 함수를 즉시 해석해서 실행한다.</li>
</ul>
</li>
<li><p>사용 이유</p>
<ol>
<li><p>초기화 : 한 번의 실행만 필요로하는 초기화 코드 부분에 많이 사용됨(변수를 전역으로 선언하는것을 피하기 위해서). 전역에 변수를 추가하지 않아도 되기 때문에 충돌없이 구현할 수 있어 플러그인이나 라이브러리등을 만들 때 많이 사용</p>
</li>
<li><p>내부 변수 보호 :</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 외부 허용 --&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fn = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"lee"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">    name: name</span><br><span class="line">&#125;</span><br><span class="line">&#125;());</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(fn.name) <span class="comment">// lee</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;!-- 외부 허용 X --&gt;</span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"lee"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">    name: name</span><br><span class="line">&#125;</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>

</li>
</ol>
</li>
</ul>
<h2 id="Modules"><a href="#Modules" class="headerlink" title="Modules"></a>Modules</h2><pre><code>- reference :
- https://www.jvandemo.com/a-10-minute-primer-to-javascript-modules-module-formats-module-loaders-and-module-bundlers/
- https://d2.naver.com/helloworld/12864
- https://linuxism.ustd.ip.or.kr/1474
- https://d2.naver.com/helloworld/591319</code></pre><h3 id="모듈이란"><a href="#모듈이란" class="headerlink" title="모듈이란?"></a>모듈이란?</h3><pre><code>**모듈**은 구현 세부 사항을 캡슐화하고 공개 API를 노출하여 재사용이 가능한 코드로 다른 코드에서 쉽게로드하고 사용할 수 있는 코드 조각</code></pre><h3 id="모듈이-왜-필요한가"><a href="#모듈이-왜-필요한가" class="headerlink" title="모듈이 왜 필요한가?"></a>모듈이 왜 필요한가?</h3><p>모듈없이도 코드를 쓸 수 있다.<br>모듈은 60~70년 대 부터 개발자들이 많은 다른 폼들과 프로그래밍 언어에서 쓰였다.</p>
<p>자바스크립트에서 모듈은 아래의 역할들을 해준다.</p>
<pre><code>- abstract code(코드를 추상화시켜준다.): 우리가 복잡한 실제 작동 방식을 이해할 필요가 없도록 특정한 라이브러리에게 기능을 위임해준다.
- encapsulate code(코드를 캡슐화시켜준다.): 코드가 수정되지 않길 바란다면 모듈안의 코드를 숨길 수 있다.
- reuse code(코드를 재사용한다.): 같은 코드를 또 다시 쓰지 않도록 해준다.
- manage dependencies(의존성을 관리해준다.): 코드를 다시 쓰지 않아도 되도록 쉽게 의존성을 변경할 수 있다.</code></pre><p><em>dependency</em> : 코드에서 두 모듈 간의 연결.</p>
<h3 id="ES5에서의-모듈-패턴"><a href="#ES5에서의-모듈-패턴" class="headerlink" title="ES5에서의 모듈 패턴"></a>ES5에서의 모듈 패턴</h3><p>es5와 그 이전 버전에서는 모듈을 염두해두지 않고 설계되었다. 시간이 지남에 따라 개발자는 JavaScript에서 모듈 식 디자인을 시뮬레이션하기 위해 다양한 패턴을 고안했다.<br>이 패턴들이 어떤 것인지 감을 주기 위해 2개의 쉬운 예를 보자 : <em>IIFE*와 *노출식 모듈 패턴</em></p>
<ol>
<li>IIFE<br>즉시실행함수는 선언될 때 실행되는 익명 함수이다. 함수가 괄호로 어떻게 둘러쌓여있는지 보자. 자바스크립트에서 <code>function</code>이라는 단어로 시작되는 줄은 함수 선언식으로 고려된다. <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'test'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>함수 선언식을 즉시 실행시키면 에러를 반환한다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'test'</span>);</span><br><span class="line">&#125;()</span><br><span class="line"><span class="comment">// Uncaught SyntaxError: Unexpected token )</span></span><br></pre></td></tr></table></figure>

<p>함수에 괄호를 추가하면 함수 표현식으로 만들어준다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'test'</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// function()&#123; console.log('test') &#125;를 반환</span></span><br></pre></td></tr></table></figure>

<p>함수 표현식은 함수를 반환하기 때문에 우리는 함수를 즉시 실행할 수 있다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'test'</span>);</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="comment">//'test'가 콘솔에 찍히고 undefined 반환</span></span><br></pre></td></tr></table></figure>

<pre><code>- 즉시실행함수 안의 복잡한 코드를 캡슐화시켜주어서 우리가 즉시실행함수 코드의 내용을 이해할 필요가 없다.
- 즉시실행함수 안에 변수를 정의하여 전역 스코프를 오염시키지 않는다. (즉시실행함수 안에서 `var`로 선언된 변수는 즉시실행함수의 closure로 남는다.)</code></pre><p>하지만 즉시실행함수가 의존성 관리에 대한 원리를 제공하진 않는다.</p>
<ol start="2">
<li>Revealing Module pattern<br>노출식 모듈 패턴은 즉시실행함수와 비슷한데, 여기서는 변수에 리턴 값을 할당해준다.<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Expose module as global variable</span></span><br><span class="line"><span class="keyword">var</span> singleton = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Inner logic</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">sayHello</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Hello'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Expose API</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    sayHello: sayHello</span><br><span class="line">  &#125;</span><br><span class="line">&#125;()</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>주의할 점은 여기서는 괄호로 함수를 감싸줄 필요가 없다는 것인데, 코드가 <code>function</code>으로 시작하지 않기 때문이다.</p>
<p>우리는 변수를 통해 모듈의 API에 접근할 수 있다. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Access module functionality</span></span><br><span class="line">singleton.sayHello();  </span><br><span class="line"><span class="comment">// =&gt; Hello</span></span><br></pre></td></tr></table></figure>

<p><code>singleton</code>대신 모듈은 생성자 함수를 노출시킬 수 있다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Expose module as global variable</span></span><br><span class="line"><span class="keyword">var</span> Module = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Inner logic</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">sayHello</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Hello'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Expose API</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    sayHello: sayHello</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>우리가 선언할 때 함수를 실행하지 않는다는 것에 주목하자.<br>대신, 우리는 <code>Module</code>이라는 생성자 함수를 사용해 모듈을 인스턴스화한다.<br><em>인스턴스(instance): 객체와 유사하지만 “현재 생성된 바로 그 객체”라는 뉘앙스</em></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="built_in">module</span> = <span class="keyword">new</span> Module();</span><br></pre></td></tr></table></figure>

<p>공개 API에 접근하기 위해서는</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.sayHello();  </span><br><span class="line"><span class="comment">// =&gt; Hello</span></span><br></pre></td></tr></table></figure>

<p>노출식 모듈 패턴은 즉시실행함수와 비슷한 장점을 제공하지만 이것 역시 의존성 관리를 위한 원리를 제공하진 않는다.</p>
<p>자바스크립트가 발전함에 따라 각각 고유의 장점과 단점이있는 모듈을 정의하기 위해 더 다양한 구문이 개발되었다.</p>
<p>우리는 그것을 모듈 포맷이라고 부른다.</p>
<h3 id="Module-formats"><a href="#Module-formats" class="headerlink" title="Module formats"></a>Module formats</h3><p>모듈 포맷은 모듈을 정의하기 위해 사용되는 문법이다.</p>
<p>ES6 이전, 자바스크립트는 모듈을 정의하기 위한 공식적인 문법이 없었다. 따라서 똑똑한 개발자들은 자바스크립트의 모듈을 정의하기 위해 다양한 포맷을 고안해냈다.</p>
<p>가장 광범위하게 받아들여지고 잘 알려진 포맷들은 :</p>
<ul>
<li>AMD(Asynchronous Module Definition)</li>
<li>CommonJs</li>
<li>UMD(Universal Moule Definition)</li>
<li>System.register</li>
<li>ES6 module format</li>
</ul>
<p>다음의 문법들을 알아볼 수 있게 간단하게 살펴보자.</p>
<ol>
<li><p>AMD(Asynchronous Module Definition)<br>AMD 포맷은 브라우저에서 사용되고 <code>define</code> 함수로 모듈을 정의한다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//의존성이 있는 모듈 정의</span></span><br><span class="line"><span class="comment">// define([의존 모듈 이름 배열], [팩토리 함수])</span></span><br><span class="line"><span class="comment">// 일단 팩토리 함수 앞에 인자로 의존성 모듈의 이름 배열을 주는데 상대 경로일 경우 .js 확장자를 생략해야 한다. </span></span><br><span class="line"><span class="comment">// 의존성 모듈의 이름 배열이 팩토리 함수의 인자로 전달되는데 배열에 지정한 순서대로 전달된다. </span></span><br><span class="line">* 팩토리함수: 함수가 객체를 리턴하는 함수</span><br><span class="line"></span><br><span class="line">define([<span class="string">'dep1'</span>, <span class="string">'dep2'</span>], <span class="function"><span class="keyword">function</span> (<span class="params">dep1, dep2</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//값을 반환하여 모듈의 값 정의</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>CommonJS format<br>CommonJS 포맷은 Node.js에서 사용되고 <code>require</code>와 <code>module.exports</code>를 사용해서 의존성과 모듈을 정의한다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dep1 = <span class="built_in">require</span>(<span class="string">'./dep1'</span>);  </span><br><span class="line"><span class="keyword">var</span> dep2 = <span class="built_in">require</span>(<span class="string">'./dep2'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  </span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Universal Module Definition (UMD)<br>UMD 포맷은 브라우저와 Node.js에서 둘 다 사용 가능하다.</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">root, factory</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> define === <span class="string">'function'</span> &amp;&amp; define.amd) &#123;</span><br><span class="line">    <span class="comment">// AMD. Register as an anonymous module.</span></span><br><span class="line">      define([<span class="string">'b'</span>], factory);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">module</span> === <span class="string">'object'</span> &amp;&amp; <span class="built_in">module</span>.exports) &#123;</span><br><span class="line">    <span class="comment">// Node. Does not work with strict CommonJS, but</span></span><br><span class="line">    <span class="comment">// only CommonJS-like environments that support module.exports,</span></span><br><span class="line">    <span class="comment">// like Node.</span></span><br><span class="line">    <span class="built_in">module</span>.exports = factory(<span class="built_in">require</span>(<span class="string">'b'</span>));</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// Browser globals (root is window)</span></span><br><span class="line">    root.returnExports = factory(root.b);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;(<span class="keyword">this</span>, <span class="function"><span class="keyword">function</span> (<span class="params">b</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//use b in some fashion.</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Just return a value to define the module export.</span></span><br><span class="line">  <span class="comment">// This example returns an object, but the module</span></span><br><span class="line">  <span class="comment">// can return a function as the exported value.</span></span><br><span class="line">  <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure>

<ol start="4">
<li><p>System.register<br>system.register 포맷은 es5에서 es6 모듈을 지원하기위해 개발되었다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; p <span class="keyword">as</span> q &#125; <span class="keyword">from</span> <span class="string">'./dep'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s = <span class="string">'local'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">  <span class="keyword">return</span> q;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">C</span> </span>&#123;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ES6 module format<br>ES6부터 JavaScript는 기본 모듈 형식도 지원한다.</p>
</li>
</ol>
<p><code>export</code> 토큰을 사용하여 모듈의 공개 API를 내보낸다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lib.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Export the function</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">sayHello</span>(<span class="params"></span>)</span>&#123;  </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Hello'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Do not export the function</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">somePrivateFunction</span>(<span class="params"></span>)</span>&#123;  </span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>import</code> 토큰으로 export된 모듈을 받아온다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; sayHello &#125; <span class="keyword">from</span> <span class="string">'./lib'</span>;</span><br><span class="line"></span><br><span class="line">sayHello();  </span><br><span class="line"><span class="comment">// =&gt; Hello</span></span><br></pre></td></tr></table></figure>

<p><code>as</code>를 사용하여 별칭을 만들어 import해올 수도 있다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; sayHello <span class="keyword">as</span> say &#125; <span class="keyword">from</span> <span class="string">'./lib'</span>;</span><br><span class="line"></span><br><span class="line">say();  </span><br><span class="line"><span class="comment">// =&gt; Hello</span></span><br></pre></td></tr></table></figure>

<p>또는 모든 모듈을 한 번에 로드할 수 있다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> lib <span class="keyword">from</span> <span class="string">'./lib'</span>;</span><br><span class="line"></span><br><span class="line">lib.sayHello();  </span><br><span class="line"><span class="comment">// =&gt; Hello</span></span><br></pre></td></tr></table></figure>

<p>이 포맷은 또한 export할 때 기본값도 지원한다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lib.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Export default function</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">sayHello</span>(<span class="params"></span>)</span>&#123;  </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Hello'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Export non-default function</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">sayGoodbye</span>(<span class="params"></span>)</span>&#123;  </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Goodbye'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>따라서 이렇게 import 할 수 있다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sayHello, &#123; sayGoodbye &#125; <span class="keyword">from</span> <span class="string">'./lib'</span>;</span><br><span class="line"></span><br><span class="line">sayHello();  </span><br><span class="line"><span class="comment">// =&gt; Hello</span></span><br><span class="line"></span><br><span class="line">sayGoodbye();  </span><br><span class="line"><span class="comment">// =&gt; Goodbye</span></span><br></pre></td></tr></table></figure>

<p>함수 뿐만 아니라 어떤 것이든 export 할 수 있다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">/ lib.js</span><br><span class="line"></span><br><span class="line"><span class="comment">// Export default function</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">sayHello</span>(<span class="params"></span>)</span>&#123;  </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Hello'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Export non-default function</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">sayGoodbye</span>(<span class="params"></span>)</span>&#123;  </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Goodbye'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Export simple value</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> apiUrl = <span class="string">'...'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Export object</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> settings = &#123;  </span><br><span class="line">  debug: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>유감스럽게도, 기본 모듈 형식은 모든 브라우저를 다 지원하지는 못합니다. </p>
<p>우리는 이미 ES6 모듈 포맷을 사용하고 있다. 하지만 우린 우리의 코드를 브라우저에서 실제로 실행시키기 전에 우리의 코드를 AMD 또는 CommonJ와 같은 ES5 모듈 포맷으로 트랜스파일 시키는 Babel과 같은 트랜스파일러가 필요하다.</p>
<h3 id="Module-loaders"><a href="#Module-loaders" class="headerlink" title="Module loaders"></a>Module loaders</h3><p>모듈 로더는 특정한 모듈 포맷으로 쓰여진 모듈을 해석하고 로드한다.</p>
<p>모듈 로더는 런타임에 실행된다:<br>    - 모듈 로더를 브라우저에서 로드한다.<br>    - 모듈에게 어떤 메인 앱 파일을 로드할지 말한다.<br>    - 모듈 로더는 메인 앱 파일을 다운받고 해석한다.<br>    - 모듈 로더는 필요에 따라 파일을 다운로드한다.</p>
<p>브라우저의 개발자 콘솔을 열면 많은 파일이 모듈 로더에 의해 요청시 로드되는 것을 볼 수 있다.</p>
<p>인기있는 모듈 로더들<br>    - RequireJS: AMD 포맷의 모듈을 위한 로더<br>    - SystemJS: AMD, CommonJS, UMD System.register 포맷의 모듈을 위한 로더</p>
<h3 id="Module-bundlers"><a href="#Module-bundlers" class="headerlink" title="Module bundlers"></a>Module bundlers</h3><p>모듈 번들러는 모듈 로더를 대체한다.<br>하지만 모듈 로더와 대조적으로 모듈 번들러는 빌드 될 때 실행된다.</p>
<ul>
<li>빌드시 모듈 번들러를 실행하여 번들 파일을 생성한다.</li>
<li>브라우저에서 번들을 로드할 수 있다.</li>
</ul>
<p>브라우저의 개발자 콘솔에서 네트워크 탭을 열면, 오직 한 개의 파일이 로드되어있는 것을 볼 수 있다. 브라우저에서는 모듈 로더가 필요 없다. 모든 코드는 번들 안에 포함되어있다.<br>인기있는 모듈 번들러<br>        - Broserify: CommonJS 모듈을 위한 번들러<br>        - Webpack: AMD, CommonJS, ES6 모듈을 위한 번들러</p>
<h3 id="요약"><a href="#요약" class="headerlink" title="요약"></a>요약</h3><p>최신 자바스크립트 개발 환경에서 tooling을 더 잘 이해하려면 모듈, 모듈 포맷, 모듈 로더 및 모듈 번들러의 차이점을 이해해야한다.</p>
<p><strong>모듈</strong>은 구현 세부 사항을 캡슐화하고 공개 API를 노출하여 재사용이 가능한 코드로 다른 코드에서 쉽게로드하고 사용할 수 있다.</p>
<p><strong>모듈 형식</strong>은 모듈을 정의하는 데 사용하는 구문이다. AMD, CommonJS, UMD 및 System.register와 같은 다양한 모듈 형식이 과거에 등장했으며 이제 ES6부터 기본 모듈 형식을 사용할 수 있다.</p>
<p><strong>모듈 로더</strong>는 런타임에 특정 모듈 형식으로 작성된 모듈을 해석하고 로드한다. 인기있는 예는 RequireJS 및 SystemJS이다.</p>
<p><strong>모듈 번들러</strong>는 모듈 로더를 대체하고 빌드시 모든 코드 번들을 생성한다. 인기있는 예는 Browserify 및 Webpack이다.</p>
<h2 id="Namespace-pattern"><a href="#Namespace-pattern" class="headerlink" title="Namespace pattern"></a>Namespace pattern</h2><ul>
<li>reference: <a href="http://www.nextree.co.kr/p7650/" target="_blank" rel="noopener">http://www.nextree.co.kr/p7650/</a></li>
</ul>
<p>네임스페이스 : 구분이 가능하도록 정해놓은 범위나 영역</p>
<p>원하는 결과를 얻기 위해 좀 더 ‘자세한’ 정보가 필요한데 이를 자바스크립트 관점에서 바라보면 네임스페이스가 자세한 정보가 된다.</p>
<p>=&gt; namespacing : 객체나 변수가 겹치지 않는 안전한 소스코드를 만드는 개념.</p>
<p>하지만 자바스크립트에서는 아직까지 네임스페이싱을 위한 기능을 지원하지 않기 때문에<br>    - 자바스크립트의 모든 객체는 프로퍼티를 가진다.<br>    - 그 프로퍼티는 다시 다른 객체를 담을 수 있다.<br>위의 특성들을 이용해 네임스페이스와 비슷한 효과를 얻을 수 있는데 이러한 기법을 <em>namespace pattern</em>이라고 한다.</p>
<ol>
<li><p>obejct literal namespacing (객체 리터럴 네임스페이싱)</p>
<ul>
<li><p>가장 기본적인 네임스페이싱 방식</p>
</li>
<li><p>하나의 전역 객체를 만든 후 모든 함수, 객체, 변수를 추가하여 구현</p>
</li>
<li><p>전역 객체 선언 시에 리터럴로 미리 선언 가능</p>
<p>장점 : 코드 내에서 뿐 아니라 같은 페이지에 존재하는 JS 라이브러리나 third-party code와의 이름 충돌도 방지해 주며 체계적</p>
<p>단점 : </p>
<ul>
<li>모든 변수와 함수에 상위 객체 명을 모두 붙여야 하기 때문에 소스 코드량이 늘어남. 결국 그에 따라 다운로드해야 하는 파일의 크기도 늘어남</li>
<li>전역 인스턴스가 단 하나 뿐이기 때문에 코드의 어느 한 부분이 수정되어도 전역 인스턴스를 수정. 계속해서 나머지 기능들도 갱신된 상태를 물려받게 됨.</li>
<li>매번 객체에 접근하는데다가 이름이 중첩되고 길어지므로 검색이 느려지게 됨. </li>
</ul>
</li>
</ul>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 하나의 전역 객체</span></span><br><span class="line"><span class="keyword">var</span> MYAPP = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">MYAPP.Parent = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="string">'Parent'</span>); &#125;;  </span><br><span class="line">MYAPP.Child = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="string">'Child'</span>); &#125;;</span><br><span class="line"></span><br><span class="line">MYAPP.variable = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 객체 컨테이너</span></span><br><span class="line">MYAPP.modules = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 객체들을 컨테이너 안에 추가합니다.</span></span><br><span class="line">MYAPP.modules.module1 = &#123;&#125;;  </span><br><span class="line">MYAPP.modules.module1.data = &#123;<span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>&#125;;  </span><br><span class="line">MYAPP.modules.module2 = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">MYAPP.Parent();                               <span class="comment">// Parent 출력  </span></span><br><span class="line"><span class="built_in">console</span>.log(MYAPP.modules.module1.data.a);    <span class="comment">// 1 출력  </span></span><br><span class="line">MYAPP.Child();                                <span class="comment">// Child 출력</span></span><br></pre></td></tr></table></figure>

<p>매번 객체에 접근하는 단점을 해결하고, 미래의 유지보수를 위해 <code>this</code> 키워드를 사용하는 방법을 생각할 수도 있지만, <strong>namespace로 사용되고 있는 객체를 this를 사용해서 참조해서는 안 된다.</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// namespace 사용</span></span><br><span class="line"><span class="keyword">var</span> MYAPP = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">MYAPP.message = <span class="string">"Hi"</span>;  </span><br><span class="line">MYAPP.sayHello = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">    <span class="comment">// 네임스페이스 명을 사용하여 리턴</span></span><br><span class="line">    <span class="keyword">return</span> MYAPP.message;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(MYAPP.sayHello());    <span class="comment">// Hi 출력  </span></span><br><span class="line"><span class="keyword">var</span> direct = MYAPP.sayHello;  </span><br><span class="line"><span class="built_in">console</span>.log(direct());            <span class="comment">// Hi 출력  </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// this 키워드 사용</span></span><br><span class="line"><span class="keyword">var</span> MYAPP = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">MYAPP.message = <span class="string">"Hi"</span>;  </span><br><span class="line">MYAPP.sayHello = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">    <span class="comment">// this를 사용하여 리턴</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.message;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(MYAPP.sayHello());    <span class="comment">// Hi 출력  </span></span><br><span class="line"><span class="keyword">var</span> direct = MYAPP.sayHello;  </span><br><span class="line"><span class="built_in">console</span>.log(direct());            <span class="comment">// undefined 출력</span></span><br></pre></td></tr></table></figure>

<p><code>this</code> 키워드는 함수를 호출하는 방식에 의해 정해지게 되는데, <code>console.log(MYAPP.sayHello());</code>에서는 dot notation 방법으로 sayHello 함수를 호출하고있기 때문에 MYAPP이 <code>this</code>가 된다. 하지만 <code>console.log(direct());</code>에서는 일반 함수 호출 방법으로 direct함수를 호출하고 있기 떄문에 this는 window를 가리키게 되고, window.message는 없기 때문에 undefined를 리턴한다.<br>따라서 절대 this로 네임스페이스로 사용되고 있는 객체를 참조해서는 안 된다. 이러한 네임스페이스 패턴의 단점을 해결하기 위해서는 샌드박스 패턴(sandbox Pattern)을 사용해야 한다.</p>
<ol start="2">
<li>샌드박스 패턴(sandbox pattern)<br>전역 범위를 더럽히지 않고 맘껏 쓰일 수 있도록 유효 범위를 정해준다.<br>위에서 다룬 네임스페이스 패턴에서는 단 하나의 전역 객체를 생성했다. 샌드박스 패턴에서는 <strong>생성자</strong>를 유일한 전역으로 사용한다. 그리고 유일한 전역인 생성자에게 <strong>콜백함수</strong>를 전달해 <em>모든 기능을 샌드박스 내부 환경으로 격리</em>시키는 방법을 사용한다. </li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Sandbox</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">        <span class="comment">// argument를 배열로 바꿉니다.</span></span><br><span class="line">        <span class="comment">//Array.prototype.slice.call() =&gt; 유사배열을 배열로 바꿔주는 메소드</span></span><br><span class="line">    <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>),</span><br><span class="line">        <span class="comment">// 마지막 인자는 콜백 함수 </span></span><br><span class="line">        callback = args.pop(),</span><br><span class="line">        <span class="comment">// 모듈은 배열로 전달될 수도있고 개별 인자로 전달 될 수도 있습니다.</span></span><br><span class="line">        modules = (args[<span class="number">0</span>] &amp;&amp; <span class="keyword">typeof</span> args[<span class="number">0</span>] === <span class="string">"string"</span>) ? args : args[<span class="number">0</span>],</span><br><span class="line">        i;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 함수가 생성자로 호출되도록 보장(new를 강제하지 않는 패턴)</span></span><br><span class="line">    <span class="keyword">if</span> (!(<span class="keyword">this</span> <span class="keyword">instanceof</span> Sandbox)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Sandbox(modules, callback);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// this에 필요한 프로퍼티들을 추가</span></span><br><span class="line">    <span class="keyword">this</span>.a = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">this</span>.b = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// "this객체에 모듈을 추가"</span></span><br><span class="line">    <span class="comment">// 모듈이 없거나 "*"(전부)이면 사용 가능한 모든 모듈을 사용한다는 의미입니다.</span></span><br><span class="line">    <span class="keyword">if</span> (!modules || modules === <span class="string">'*'</span> || modules[<span class="number">0</span>] === <span class="string">'*'</span>) &#123;</span><br><span class="line">        modules = [];</span><br><span class="line">        <span class="keyword">for</span> (i <span class="keyword">in</span> Sandbox.Modules) &#123;</span><br><span class="line">            <span class="keyword">if</span> (Sandbox.modules.hasOwnProperty(i)) &#123;</span><br><span class="line">                modules.push(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 필요한 모듈들을 초기화</span></span><br><span class="line">    <span class="keyword">var</span> m_length = modules.length;</span><br><span class="line">    <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;m_length; i+=<span class="number">1</span>) &#123;</span><br><span class="line">        Sandbox.modules[modules[i]](<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 콜백 함수 호출</span></span><br><span class="line">    callback(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 필요한 프로토타입 프로퍼티들을 추가</span></span><br><span class="line">Sandbox.prototype = &#123;  </span><br><span class="line">    name: <span class="string">"nextree"</span>,</span><br><span class="line">    getName: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// new 키워드를 사용하지 않고 'ajax'와 'dom'이라는 가상의 모듈을 사용하는 객체를 생성. </span></span><br><span class="line"><span class="comment">// 사용할 인자를 앞쪽 argument로 전달해주고 마지막 인자로 콜백 함수를 전달.</span></span><br><span class="line">Sandbox (<span class="string">'ajax'</span>, <span class="string">'dom'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">box</span>) </span>&#123;  </span><br><span class="line">    <span class="comment">// console.log(box);</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>이렇게 샌드박스 패턴을 사용하면 콜백함수로 감싸진 샌드박스 객체 안에서 마음껏 구현이 가능하다. 또한 위에서 언급한 네임스페이스 패턴의 몇 가지 단점을 극복할 수 있다.<br>    - 단 하나의 전역변수에 의존하는 네임스페이스 패턴의 단점을 여러 개의 샌드박스 객체를 생성함으로 극복할 수 있다.<br>    - 점으로 연결된 긴 이름을 쓸 필요가 없다.<br>    - runtime에 탐색 작업을 거치지 않게 해준다.</p>
<ol start="3">
<li>범용 네임스페이스 함수<ul>
<li>프로그램이 복잡해짐에 따라 코드의 각 부분들이 별개의 파일로 분리되어 선택적으로 문서에 포함되는 경우가 많음.</li>
<li>그러다보면 네임스페이스로 사용할 객체를 선언할 때나 그 내부의 프로퍼티를 정의할 때 이미 있는 것을 재정의하는 일도 생길 수 있음.</li>
<li>이를 확인하지 못한 채 지나가면 내용을 덮어쓰는 문제가 생김.</li>
</ul>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1번</span></span><br><span class="line"><span class="keyword">var</span> MYAPP = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2번</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> MYAPP === <span class="string">"undefined"</span>) &#123;  </span><br><span class="line">    <span class="keyword">var</span> MYAPP = &#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3번</span></span><br><span class="line"><span class="keyword">var</span> MYAPP = MYAPP || &#123;&#125;;</span><br></pre></td></tr></table></figure>

<p>1번 처럼 객체를 선언하는 대신, 2번처럼 미리 선언되어있는지를 확인하고 정의해주어야한다. 3번은 2번과 똑같이 작동하는 short-hand 방식.<br>하지만 이런식으로 반복하다보면 중복되는 코드가 생겨남. =&gt; 재사용 가능한 함수를 만드는 것이 좋다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 가장 상단에 위치할 객체는 먼저 선언합니다. </span></span><br><span class="line"><span class="comment">// (namespace함수를 전역으로 선언하지 않기 위함입니다.)</span></span><br><span class="line"><span class="keyword">var</span> MYAPP = MYAPP || &#123;&#125;;</span><br><span class="line"></span><br><span class="line">MYAPP.nsFunc = <span class="function"><span class="keyword">function</span> (<span class="params">ns_string</span>) </span>&#123;  </span><br><span class="line">    <span class="comment">// '.'으로 구분된 네임스페이스 표기를 쪼갭니다</span></span><br><span class="line">    <span class="keyword">var</span> sections = ns_string.split(<span class="string">'.'</span>),</span><br><span class="line">        parent = MYAPP,</span><br><span class="line">        i;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 최상단의 MYAPP객체는 이미 선언되었으므로 제거합니다.</span></span><br><span class="line">    <span class="keyword">if</span> (sections[<span class="number">0</span>] === <span class="string">"MYAPP"</span>) &#123;</span><br><span class="line">        sections = sections.slice(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> s_length = sections.length;</span><br><span class="line">    <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;s_length; i+=<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">// 프로퍼티가 존재하지 않아야만 생성합니다.</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> parent[sections[i]] === <span class="string">"undefined"</span>) &#123;</span><br><span class="line">            parent[sections[i]] = &#123;&#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        parent = parent[sections[i]];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> parent;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>


                    
                        


                    
                    
                        <p>
                            <a
                                href="/2019/09/26/IIFE-modules-namespaces/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-right">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2019/09/15/expression-vs-statement/"
                            aria-label=": 7. Expression vs statement"
                        >
                            7. Expression vs statement
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-09-15T00:00:00+09:00">
	
		    Sep 15, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Dev/">Dev</a>, <a class="category-link" href="/categories/Dev/JavaScript/">JavaScript</a>, <a class="category-link" href="/categories/Dev/JavaScript/33-js-concepts/">33-js-concepts</a>


    
</div>

            </div>
            
                <div class="postShorten-excerpt">
                    <br>
                    
                        <a
                            href="/2019/09/15/expression-vs-statement/"
                            class="postShorten-excerpt_link link"
                            aria-label=": 7. Expression vs statement"
                        >
                            Continue reading
                        </a>
                        
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-right">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2019/09/15/scope/"
                            aria-label=": 6. Function Scope, Block Scope and Lexical Scope"
                        >
                            6. Function Scope, Block Scope and Lexical Scope
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-09-15T00:00:00+09:00">
	
		    Sep 15, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Dev/">Dev</a>, <a class="category-link" href="/categories/Dev/JavaScript/">JavaScript</a>, <a class="category-link" href="/categories/Dev/JavaScript/33-js-concepts/">33-js-concepts</a>


    
</div>

            </div>
            
                <div class="postShorten-excerpt">
                    <br>
                    
                        <a
                            href="/2019/09/15/scope/"
                            class="postShorten-excerpt_link link"
                            aria-label=": 6. Function Scope, Block Scope and Lexical Scope"
                        >
                            Continue reading
                        </a>
                        
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-right">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2019/09/08/amathon-후기/"
                            aria-label=": amathon 후기"
                        >
                            amathon 후기
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-09-08T00:00:00+09:00">
	
		    Sep 08, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/challenge/">challenge</a>, <a class="category-link" href="/categories/challenge/amathon/">amathon</a>


    
</div>

            </div>
            
                <div class="postShorten-excerpt">
                    <p>개발자로서 <strong>첫 해커톤</strong>을 성공적으로 마친 기념으로🥳 아마톤의 간단한 후기를 작성해보기로 했다!</p>
                    
                        <a
                            href="/2019/09/08/amathon-후기/"
                            class="postShorten-excerpt_link link"
                            aria-label=": amathon 후기"
                        >
                            Continue reading
                        </a>
                        
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-right">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2019/08/04/vs-vs-typeof/"
                            aria-label=": 5. == vs === vs typeof"
                        >
                            5. == vs === vs typeof
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-08-04T00:00:00+09:00">
	
		    Aug 04, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Dev/">Dev</a>, <a class="category-link" href="/categories/Dev/JavaScript/">JavaScript</a>, <a class="category-link" href="/categories/Dev/JavaScript/33-js-concepts/">33-js-concepts</a>


    
</div>

            </div>
            
                <div class="postShorten-excerpt">
                    <br>
                    
                        <a
                            href="/2019/08/04/vs-vs-typeof/"
                            class="postShorten-excerpt_link link"
                            aria-label=": 5. == vs === vs typeof"
                        >
                            Continue reading
                        </a>
                        
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-right">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2019/07/25/implicit/"
                            aria-label=": 4. Implicit, Explicit, Nominal, Structuring and Duck Typing"
                        >
                            4. Implicit, Explicit, Nominal, Structuring and Duck Typing
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-07-25T00:00:00+09:00">
	
		    Jul 25, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Dev/">Dev</a>, <a class="category-link" href="/categories/Dev/JavaScript/">JavaScript</a>, <a class="category-link" href="/categories/Dev/JavaScript/33-js-concepts/">33-js-concepts</a>


    
</div>

            </div>
            
                <div class="postShorten-excerpt">
                    <br>
                    
                        <a
                            href="/2019/07/25/implicit/"
                            class="postShorten-excerpt_link link"
                            aria-label=": 4. Implicit, Explicit, Nominal, Structuring and Duck Typing"
                        >
                            Continue reading
                        </a>
                        
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-right">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2019/07/20/value-Types/"
                            aria-label=": 3. Value Types and Reference Types"
                        >
                            3. Value Types and Reference Types
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-07-20T00:00:00+09:00">
	
		    Jul 20, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Dev/">Dev</a>, <a class="category-link" href="/categories/Dev/JavaScript/">JavaScript</a>, <a class="category-link" href="/categories/Dev/JavaScript/33-js-concepts/">33-js-concepts</a>


    
</div>

            </div>
            
                <div class="postShorten-excerpt">
                    <br>
                    
                        <a
                            href="/2019/07/20/value-Types/"
                            class="postShorten-excerpt_link link"
                            aria-label=": 3. Value Types and Reference Types"
                        >
                            Continue reading
                        </a>
                        
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-right">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2019/07/19/node/"
                            aria-label=": Node.js"
                        >
                            Node.js
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-07-19T00:00:00+09:00">
	
		    Jul 19, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Dev/">Dev</a>, <a class="category-link" href="/categories/Dev/JavaScript/">JavaScript</a>


    
</div>

            </div>
            
                <div class="postShorten-excerpt">
                    <br>
                    
                        <a
                            href="/2019/07/19/node/"
                            class="postShorten-excerpt_link link"
                            aria-label=": Node.js"
                        >
                            Continue reading
                        </a>
                        
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-right">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2019/07/19/primitive-types/"
                            aria-label=": 2. Primitive types"
                        >
                            2. Primitive types
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-07-19T00:00:00+09:00">
	
		    Jul 19, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Dev/">Dev</a>, <a class="category-link" href="/categories/Dev/JavaScript/">JavaScript</a>, <a class="category-link" href="/categories/Dev/JavaScript/33-js-concepts/">33-js-concepts</a>


    
</div>

            </div>
            
                <div class="postShorten-excerpt">
                    <br>
                    
                        <a
                            href="/2019/07/19/primitive-types/"
                            class="postShorten-excerpt_link link"
                            aria-label=": 2. Primitive types"
                        >
                            Continue reading
                        </a>
                        
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-right">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2019/07/18/call-stack/"
                            aria-label=": 1. Call Stack"
                        >
                            1. Call Stack
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-07-18T00:00:00+09:00">
	
		    Jul 18, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Dev/">Dev</a>, <a class="category-link" href="/categories/Dev/JavaScript/">JavaScript</a>, <a class="category-link" href="/categories/Dev/JavaScript/33-js-concepts/">33-js-concepts</a>


    
</div>

            </div>
            
                <div class="postShorten-excerpt">
                    <br>
                    
                        <a
                            href="/2019/07/18/call-stack/"
                            class="postShorten-excerpt_link link"
                            aria-label=": 1. Call Stack"
                        >
                            Continue reading
                        </a>
                        
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
          <li class="pagination-next">
            <a
                class="btn btn--default btn--small"
                href="/page/2/"
                aria-label="OLDER POSTS"
            >
              <span>OLDER POSTS</span>
              <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
          </li>
        
        <li class="pagination-number">page 1 of 2</li>
    </ul>
</div>

</section>


                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2019 hyerinOh. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        
    
        
                                            <div id="about">
                                                <div id="about-card">
                                                    <div id="about-btn-close">
                                                        <i class="fa fa-times"></i>
                                                    </div>
                                                    
                                                            <h4 id="about-card-name">
                                                                hyerinOh
                                                            </h4>
                                                            
                                                                <div id="about-card-bio">
                                                                    <p>프린이</p>

                                                                </div>
                                                                
                                                                    
                                                                        <div id="about-card-job">
                                                                            <i class="fa fa-briefcase"></i>
                                                                            <br/>
                                                                            <p>software engineer</p>

                                                                        </div>
                                                                        
                                                                            
                                                                                <div id="about-card-location">
                                                                                    <i class="fa fa-map-marker-alt"></i>
                                                                                    <br/>
                                                                                    Seoul, Korea
                                                                                </div>
                                                                                
                                                </div>
                                            </div>
        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/jquery.js"></script>
<script src="/assets/js/jquery.fancybox.js"></script>
<script src="/assets/js/thumbs.js"></script>
<script src="/assets/js/tranquilpeak.js"></script>
<!--SCRIPTS END-->





    </body>
</html>
